import{d as v,r as w,w as z,o as p,c as O,a as o,b as l,u as e,I as r,e as u,f as m,g as i,h as C,F as $,i as S,j as _,k as T,l as U,m as E,n as k,p as L,t as M,q as V,s as B,v as P,x as A,y as F,z as b,A as x,B as y,C as N,D as j}from"./index-o_nXWqzU.js";import{a as D}from"./axios-BsqOtiWN.js";const q=v({__name:"book",props:{book:{}},setup(I){const f=I,n=w({title:"",code:"",authorId:0,genreId:0}),d=()=>{console.log("Saving book",n.value)},c=()=>{console.log("Closing modal")};return z(()=>f.book,s=>{n.value={...s}},{immediate:!0}),(s,t)=>(p(),O($,null,[o(e(i),null,{default:l(()=>[o(e(r),{position:"stacked"},{default:l(()=>t[4]||(t[4]=[u("Title")])),_:1}),o(e(m),{modelValue:n.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.title=a)},null,8,["modelValue"])]),_:1}),o(e(i),null,{default:l(()=>[o(e(r),{position:"stacked"},{default:l(()=>t[5]||(t[5]=[u("Code")])),_:1}),o(e(m),{modelValue:n.value.code,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.code=a)},null,8,["modelValue"])]),_:1}),o(e(i),null,{default:l(()=>[o(e(r),{position:"stacked"},{default:l(()=>t[6]||(t[6]=[u("Author ID")])),_:1}),o(e(m),{modelValue:n.value.authorId,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value.authorId=a)},null,8,["modelValue"])]),_:1}),o(e(i),null,{default:l(()=>[o(e(r),{position:"stacked"},{default:l(()=>t[7]||(t[7]=[u("Genre ID")])),_:1}),o(e(m),{modelValue:n.value.genreId,"onUpdate:modelValue":t[3]||(t[3]=a=>n.value.genreId=a)},null,8,["modelValue"])]),_:1}),o(e(C),{onClick:d},{default:l(()=>t[8]||(t[8]=[u("Save")])),_:1}),o(e(C),{onClick:c},{default:l(()=>t[9]||(t[9]=[u("Close")])),_:1})],64))}}),G=v({__name:"books",setup(I){const f=async s=>{try{await D.post("https://wm.ziasserver.com/api/delete/book",{body:s.id}),d.value=d.value.filter(t=>t.id!==s.id)}catch(t){console.error("Error deleting book:",t)}},n=s=>{s.popup=!s.popup},d=w([]),c=async()=>{try{const s=await D.get("https://wm.ziasserver.com/api/list/books");d.value=s.data}catch(s){console.error("Error fetching books:",s)}};return S(()=>{c()}),(s,t)=>(p(),_(e(U),null,{default:l(()=>[(p(!0),O($,null,T(d.value,a=>(p(),_(e(E),{key:a.id},{default:l(()=>[o(e(i),null,{default:l(()=>[o(e(k),{icon:e(L),slot:"start"},null,8,["icon"]),o(e(r),null,{default:l(()=>[u(M(a.title),1)]),_:2},1024)]),_:2},1024),o(e(V),{side:"start"},{default:l(()=>[o(e(B),{onClick:g=>f(a),color:"danger"},{default:l(()=>[o(e(k),{icon:e(P)},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024),o(e(V),{side:"end"},{default:l(()=>[o(e(B),{onClick:g=>n(a)},{default:l(()=>[o(e(k),{icon:e(A)},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024),o(e(F),{"is-open":a.popup,onDidDismiss:g=>n(a)},{default:l(()=>[o(q,{book:a},null,8,["book"])]),_:2},1032,["is-open","onDidDismiss"])]),_:2},1024))),128))]),_:1}))}}),K=v({__name:"BooksPage",setup(I){return(f,n)=>(p(),_(e(j),null,{default:l(()=>[o(e(y),null,{default:l(()=>[o(e(b),null,{default:l(()=>[o(e(x),null,{default:l(()=>n[0]||(n[0]=[u("Books")])),_:1})]),_:1})]),_:1}),o(e(N),{fullscreen:!0},{default:l(()=>[o(e(y),{collapse:"condense"},{default:l(()=>[o(e(b),null,{default:l(()=>[o(e(x),{size:"large"},{default:l(()=>n[1]||(n[1]=[u("Books")])),_:1})]),_:1})]),_:1}),o(G)]),_:1})]),_:1}))}});export{K as default};
